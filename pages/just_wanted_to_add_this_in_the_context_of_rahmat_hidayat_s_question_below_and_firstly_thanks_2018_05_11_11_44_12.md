<a href="https://medium.com/@blakehschwartz/just-wanted-to-add-this-in-the-context-of-rahmat-hidayats-question-below-and-firstly-thanks-ca7fdf78bb95">https://medium.com/@blakehschwartz/just-wanted-to-add-this-in-the-context-of-rahmat-hidayats-question-below-and-firstly-thanks-ca7fdf78bb95</a><div id="articleHeader"><h1>Just wanted to add this in the context of Rahmat Hidayat’s question (below) — and firstly, thanks…</h1></div><p id="2334">Just wanted to add this in the context of <a href="https://medium.com/@rahmathd" target="_blank">Rahmat Hidayat</a>’s question (below) — and firstly, thanks for such an excellent article! Really well written, and easy to follow.</p><p id="caea">As far as waiting for a buffer to fill before processing a particular chunk, when working with streams it’s common to do something like the following:</p><pre id="a3a4">let data</pre><pre id="bf26">let stream = fs.createWriteStream(dataSource)</pre><pre id="4c88">stream.setEncoding('utf8')</pre><pre id="5e91">stream.on(‘data’, (chunk) =&gt; {<br />    // you can do something with each chunk </pre><pre id="9630">    data += chunk<br />})</pre><pre id="7bb4">stream.on('end', () =&gt; {<br />    // or wait until the stream ends, when you have all the data<br />})</pre><p id="7e84">However, Node also has the StringDecoder module. From the documentation:</p><pre id="5713">When a <code>Buffer</code> instance is written to the <code>StringDecoder</code> instance, an internal buffer is used to ensure that the decoded string does not contain any incomplete multibyte characters. These are held in the buffer until the next call to <code>stringDecoder.write()</code> or until <code>stringDecoder.end()</code> is called.</pre><p id="105f">There are a number of useful examples on the documentation page: <a href="https://nodejs.org/api/string_decoder.html" target="_blank">https://nodejs.org/api/string_decoder.html</a></p>