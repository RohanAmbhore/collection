<a href="https://github.com/facebook/create-react-app/pull/94">https://github.com/facebook/create-react-app/pull/94</a><div id="articleHeader"><h1>              Don't assume the project is hosted at the root            #94    </h1></div>


  <div>
    <div>
        <div>
          
          Merged
        </div>
    
    <div>
          <a href="/gaearon" target="_blank">gaearon</a>
  merged 5 commits into



  facebook:master

from

unknown repository


  <relative-time>on Jul 25, 2016</relative-time>

    </div>
  



      




    <h2>Conversation</h2>
    <div id="discussion_bucket">
      


<div>
  <div>

    <div>
      




      
<div>
  <div id="issue-78526601">

    
<div>
  

    
    
      Contributor
    



  <h3>

    <strong>
      

  <a href="/dhruska" target="_blank">dhruska</a>
  

    </strong>

    commented

    <a href="#issue-78526601" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>


  </h3>
</div>


    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <ul>
<li>Require package.json in webpack.config.prod.js and use homepage if set; otherwise use '/'</li>
</ul>
<p>Fixes <a href="https://github.com/facebook/create-react-app/issues/21" target="_blank">#21</a></p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  


    

    

  


  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234632046">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at <a href="https://code.facebook.com/cla" target="_blank">https://code.facebook.com/cla</a> - and if you have received this in error or have any questions, please drop us a line at <a href="mailto:cla@fb.com" target="_blank">cla@fb.com</a>. Thanks!</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234632509">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p><a href="https://github.com/sotojuan" target="_blank">@sotojuan</a> Looks like <a href="https://github.com/dhruska" target="_blank">@dhruska</a> beat you to it‚Äîdid you have a similar implementation in mind? Are there any edge cases you can see here?</p>
<p><a href="https://github.com/dhruska" target="_blank">@dhruska</a> Thanks for contributing! I‚Äôll review next week, I need to get some sleep after releasing. <g-emoji>üòÑ</g-emoji> Next time I‚Äôd appreciate if you coordinated on the issue first because it‚Äôs frustrating when somebody already starts their work, and then somebody else submits a PR.</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234632974">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
      <div>
  <h3 id="event-732167239">

    
      
    

    

        <img src="https://avatars0.githubusercontent.com/u/10137?s=32&v=4" width="16" height="16" alt="@ghost" />
  <strong>ghost</strong>


      

  added
  the 

  <a href="/facebook/create-react-app/labels/CLA%20Signed" target="_blank">CLA Signed</a><img src="chrome-extension://pgmpdhecmoecoihpehfeghpcphaeenkp/images/star-orange.svg" />47,606

 label


    <a href="#event-732167239" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>

  </h3>
</div>





  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234634128">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Yeah that looks fine, no problem! Looks good <a href="https://github.com/dhruska" target="_blank">@dhruska</a>!</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
      <div>
  <h3 id="event-732173168">

    
      
    

    

        <img src="https://avatars0.githubusercontent.com/u/10137?s=32&v=4" width="16" height="16" alt="@ghost" />
  <strong>ghost</strong>


      

  added
  the 

  <a href="/facebook/create-react-app/labels/CLA%20Signed" target="_blank">CLA Signed</a><img src="chrome-extension://pgmpdhecmoecoihpehfeghpcphaeenkp/images/star-orange.svg" />47,606

 label


    <a href="#event-732173168" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>

  </h3>
</div>





  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234634398">

    
<div>
  

    
    
      Contributor
    



  <h3>

    <strong>
      

  <a href="/dhruska" target="_blank">dhruska</a>
  

    </strong>

    commented

    <a href="#issuecomment-234634398" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>


  </h3>
</div>


    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p><a href="https://github.com/sotojuan" target="_blank">@sotojuan</a> and <a href="https://github.com/gaearon" target="_blank">@gaearon</a>, I should have made a note that I was taking a look at this one - that's my fault, my apologies.</p>
<p><a href="https://github.com/gaearon" target="_blank">@gaearon</a>, sounds great - I suppose we should make a mention of this in the README potentially?</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234634561">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p><a href="https://github.com/dhruska" target="_blank">@dhruska</a> Yep, should do this as part of <a href="https://github.com/facebook/create-react-app/issues/92" target="_blank">#92</a>.</p>
<p>Can you please look into why travis fails?</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234635185">

    
<div>
  

    
    
      Contributor
    



  <h3>

    <strong>
      

  <a href="/dhruska" target="_blank">dhruska</a>
  

    </strong>

    commented

    <a href="#issuecomment-234635185" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>


  </h3>
</div>


    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>I'm having trouble viewing the build details - getting <code>The repository at facebookincubator/create-react-app was not found.</code>. Potentially a permissions issue?</p>
<p>As for the README do you think we should mention that the prod package url is read from package.json, or put that in the creation flow?</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234636368">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Travis log:</p>
<p><a href="https://cloud.githubusercontent.com/assets/2268452/17068998/01e05be0-5009-11e6-838e-a9a295ada19e.png" target="_blank" class="readableLinkWithLargeImage"><div class="readableLargeImageContainer"><img src="https://cloud.githubusercontent.com/assets/2268452/17068998/01e05be0-5009-11e6-838e-a9a295ada19e.png" alt="screen shot 2016-07-22 at 12 36 48 pm" /></div></a></p>
      </td>
    </tr>
  </tbody>
</table>


        



    

  






  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234638428">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>I‚Äôll check in with our team about Travis permissions, stay tuned <g-emoji>üëç</g-emoji></p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234638457">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>For now you can run <code>sh ./tasks/e2e.sh</code></p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234645147">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>If you push again, Travis should pick this up now. We fixed permissions.</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
      <div>
  <h3 id="event-732317683">

    
      
    

    

        <img src="https://avatars0.githubusercontent.com/u/10137?s=32&v=4" width="16" height="16" alt="@ghost" />
  <strong>ghost</strong>


      

  added
  the 

  <a href="/facebook/create-react-app/labels/CLA%20Signed" target="_blank">CLA Signed</a><img src="chrome-extension://pgmpdhecmoecoihpehfeghpcphaeenkp/images/star-orange.svg" />47,606

 label


    <a href="#event-732317683" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>

  </h3>
</div>





  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234687378">

    
<div>
  

    
    
      Contributor
    



  <h3>

    <strong>
      

  <a href="/dhruska" target="_blank">dhruska</a>
  

    </strong>

    commented

    <a href="#issuecomment-234687378" target="_blank"><relative-time>on Jul 23, 2016</relative-time></a>


  </h3>
</div>


    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Sounds great - I can access Travis now. Added a sample package.json per our conversation above and fixed the file path.</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  






  
<div>
    

<div>
  
  <div>
    

<div>
  <div>
      <a href="/facebook/create-react-app/pull/94/files/17ced6bc9857181c67e4b737b0e0ff50173f3a01#diff-1a40e6c8e8713d4af22007160e07a446" title="config/webpack.config.prod.js" target="_blank">
        config/webpack.config.prod.js
      </a>
  </div>

  <div>
    <table id="discussion-diff-71976502">
      


    <tbody><tr>

        <td id="discussion-diff-71976502L38"></td>

        <td></td>

      <td>
        -    // TODO: this wouldn't work for e.g. GH Pages.

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-71976502L39"></td>

        <td></td>

      <td>
        -    // Good news: we can infer it from package.json :-)

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-71976502L40"></td>

        <td></td>

      <td>
        -    publicPath: '/'

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-71976502R39"></td>

      <td>
        +    publicPath: publicPath

      </td>
    </tr>

    </tbody></table>
  </div>

  <div>
    
  <div>
    <div>
        

<div>
    
  <div id="discussion_r71976502">
    <div>
      


      
        
      

      <div>
        <h4>
          <strong>
              <a href="/gaearon" target="_blank">gaearon</a> 
          </strong>
          

              <a href="#discussion_r71976502" target="_blank">
                <relative-time>on Jul 24, 2016</relative-time>
              </a>

          
        </h4>

        
    
      Member
    





        <div>
          <p>Maybe it‚Äôs best to infer just the path portion? e.g. <code>stuff.com/wow</code> should give us just <code>/wow</code>.<br />
What do you think?</p>
        </div>

          



      
    

  


        

<div>
    
  <div id="discussion_r71994829">
    <div>
      


      
        
      

      <div>
        <h4>
          <strong>
              <a href="/dhruska" target="_blank">dhruska</a> 
          </strong>
          

              <a href="#discussion_r71994829" target="_blank">
                <relative-time>on Jul 25, 2016</relative-time>
              </a>

          
        </h4>

        
    
      Contributor
    





        <div>
          <p>Yeah, agreed - good call. Putting together a regex that could do it, but do you think there is a more elegant way?</p>
        </div>

          



      
    

  


        

<div>
    
  <div id="discussion_r71994846">
    <div>
      


      
        
      

      <div>
        <h4>
          <strong>
              <a href="/gaearon" target="_blank">gaearon</a> 
          </strong>
          

              <a href="#discussion_r71994846" target="_blank">
                <relative-time>on Jul 25, 2016</relative-time>
              </a>

          
        </h4>

        
    
      Member
    





        <div>
          <p><a href="https://nodejs.org/api/url.html#url_url_parse_urlstring_parsequerystring_slashesdenotehost" target="_blank"><code>url.parse()</code></a> gives you an object with <code>pathname</code>.</p>
        </div>

          



      
    

  


        

<div>
    
  <div id="discussion_r71995340">
    <div>
      


      
        
      

      <div>
        <h4>
          <strong>
              <a href="/dhruska" target="_blank">dhruska</a> 
          </strong>
          

              <a href="#discussion_r71995340" target="_blank">
                <relative-time>on Jul 25, 2016</relative-time>
              </a>

          
        </h4>

        
    
      Contributor
    





        <div>
          <p>Ah right. Thanks for bearing with me. Added that, so we should now always have the path portion of the url defined in <code>homepage</code>, or <code>/</code> if it isn't defined.</p>
        </div>

          



      
    

  </div>
</div>



    </div>

      
  </div>

  </div>
</div>


  </div>
</div>


</div>

  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234802597">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>This looks very good. The only problem I see so far is that our instructions no longer work in this case:</p>
<pre><code>You can now serve it with any static server, for example:
  cd build
  npm install -g http-server
  hs
  open http://localhost:8080
</code></pre>
<p>Not sure how to fix this yet.</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234803028">

    
<div>
  

    
    
      Member
    



  <h3>

    <strong>
      

  <a href="/gaearon" target="_blank">gaearon</a>
  

    </strong>

    commented

    <a href="#issuecomment-234803028" target="_blank"><relative-time>on Jul 25, 2016</relative-time></a>


      
  ‚Ä¢


  
    <summary>
      
          edited
      
      
    </summary>

    
  

  </h3>
</div>


    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Let‚Äôs change the message to</p>
<pre><code>Successfully generated a bundle in the build folder!
You can now deploy and serve it from &lt;homepage&gt;.
The bundle is optimized and ready to be deployed to production.
</code></pre>
<p>(only when <code>homepage</code> is set)</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234803069">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>You will also need to add a section in howto (<code>template/README.md</code>).<br />
Ideally there should be a walkthrough on publishing to GH pages.</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  


  


  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234805552">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>A great start would be to (after setting the project page <code>homepage</code> key:value):</p>
<ul>
<li><code>git checkout -b gh-pages</code> (if never created)</li>
<li><code>npm run build</code></li>
<li><code>git add . && git commit -m "some commit message"</code></li>
<li><code>git subtree push --prefix build origin gh-pages</code></li>
</ul>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234805642">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <blockquote>
<p>git subtree push --prefix build origin gh-pages</p>
</blockquote>

<p><a href="https://camo.githubusercontent.com/99243d9851cac15e570b9a37482b563c84c3b4a4/68747470733a2f2f6d656469612e67697068792e636f6d2f6d656469612f543551734c59615a5a6a595a4f2f67697068792e676966" target="_blank" class="readableLinkWithLargeImage"><div class="readableLargeImageContainer"><img src="https://camo.githubusercontent.com/99243d9851cac15e570b9a37482b563c84c3b4a4/68747470733a2f2f6d656469612e67697068792e636f6d2f6d656469612f543551734c59615a5a6a595a4f2f67697068792e676966" /></div></a></p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234805965">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>I learned that today too! Haha</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234806030">

    
<div>
  

    
    
      Contributor
    



  <h3>

    <strong>
      

  <a href="/dhruska" target="_blank">dhruska</a>
  

    </strong>

    commented

    <a href="#issuecomment-234806030" target="_blank"><relative-time>on Jul 25, 2016</relative-time></a>


  </h3>
</div>


    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>Wow, that is awesome!</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  


  
<div>
    
<div>
  




  
<div>
    
  <div id="issuecomment-234810182">

    



    <div>

      
<table>
  <tbody>
    <tr>
      <td>

          <p>FYI, I continued this in <a href="https://github.com/facebook/create-react-app/pull/162" target="_blank">#162</a>.</p>
      </td>
    </tr>
  </tbody>
</table>


        



    </div>

  </div>
</div>

</div>

</div>

  




    









  </div>

  <div>
        




        
<div>
  

    
      



      <div>
        
          <div>
  


  
  <div>

    

    

        <p>
    
    
        Attach files by dragging & dropping,
        selecting them, or pasting
        from the clipboard.
    
    
    
    
    
    
    
    
    
  </p>


    
  </div>

  

  


  
</div>

          
      </div>

    <div>
      
      <strong>ProTip!</strong>
      Add <a href="/facebook/create-react-app/pull/94.patch" target="_blank">.patch</a> or <a href="/facebook/create-react-app/pull/94.diff" target="_blank">.diff</a> to the end of URLs for Git‚Äôs plaintext views.
    </div>
</div>


  </div>
</div>

    </div>
  