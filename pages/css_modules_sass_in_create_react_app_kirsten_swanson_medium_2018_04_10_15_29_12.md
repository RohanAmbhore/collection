<a href="https://medium.com/@kswanie21/css-modules-sass-in-create-react-app-37c3152de9">https://medium.com/@kswanie21/css-modules-sass-in-create-react-app-37c3152de9</a><div id="articleHeader"><h1>CSS Modules & Sass in Create React App</h1></div><p id="04c7">Whenever I can I’ll integrate Sass into projects, so this time I was determined to configure Sass AND CSS modules into my create-react-app project. Let’s start from the very beginning with creating a new project.</p><p id="c468"><code>npm i -g create-react-app</code></p><p id="f3a2"><code>create-react-app project-name</code></p><p id="8ae8"><code>cd project-name</code></p><p id="2756">Now when you <code>npm start</code> or <code>yarn start</code> your project is all configured and ready to go…except there’s no Sass out of the box. Everything came neatly bundled together, but now we’re going to have to eject in order to change the Webpack configuration. Word of caution, once you eject you can never go back!</p><p id="123b"><code>npm run eject</code> or <code>yarn eject</code></p><p id="366a">Now you have a <code>config</code> folder at your disposal. This makes you have full control over your project since you can access all of your packages, scripts and configurations. Navigate to your <code>package.json</code> file and look how many dependencies you have! We’re going to be adding some more to support the preprocessing of Sass (<em>.scss</em> files).</p><p id="4ef6"><code>npm i sass-loader node-sass --save</code> or <code>yarn add sass-loader node-sass</code></p><p id="bfcb">Once you have installed these packages navigate to the <br /><code>webpack.config.dev.js</code> file within the <code>config</code> folder. Here we’re going to add another loader, so our .<em>scss</em> files can process.</p><figure id="2e66"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*ovlk_Rf_QZKzl1XuU8Tzeg.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*ovlk_Rf_QZKzl1XuU8Tzeg.png" /></div></figure><p id="f702">At the bottom of the loaders right after you have inserted the loaders for Sass you’ll see this warning:</p><figure id="e75f"><div><img src="https://cdn-images-1.medium.com/max/2000/1*JVG67oM-RI__xVWJSOFSiA.png" /></div></figure><p id="db29">Just add <code>/\.scss$/,</code> to the ‘<em>exclude</em>’ list since it needs to be updated whenever there’s a change to loader extensions.</p><figure id="344a"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*wwdEajyeUuFBWbmaxQTcPw.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*wwdEajyeUuFBWbmaxQTcPw.png" /></div></figure><p id="9bb5">Now let’s make sure that we’re all configured correctly by testing out some Sass! I always use the color <em>red, </em>since you know right away whether your CSS is hooked up correctly or not. What better way to use this color than with the Sass lighten function.</p><p id="0e5e">Let’s go ahead and change the <code>index.css</code> file to <code>index.scss</code>. In the <code>index.js</code> file we will now import our styles by <code>import './index.scss'</code>. <br />I just used the lighten function on the background of the body.</p><figure id="9d6e"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*hlIqBGDFBmHJ2aoKoQRokQ.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*hlIqBGDFBmHJ2aoKoQRokQ.png" /></div></figure><p id="d48b">Now if everything was set-up correctly you will have this beautiful red screen in front of you! Success, now we’re going to add the capability of CSS modules!</p><figure id="823d"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*sk46oiQ2CJ_KeL3v909v4A.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*sk46oiQ2CJ_KeL3v909v4A.png" /></div></figure></section><section><div><div><p id="dccc">Let’s make modular components with CSS modules! First let’s do a little rearranging of our file structure, so that we put our <em>App</em> component in isolation. This way we can really start to feel some modularity.</p><figure id="12fb"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*Z700uBHKmz5LfmlTf9KYDQ.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*Z700uBHKmz5LfmlTf9KYDQ.png" /></div></figure><p id="bb83">Now let’s go back to the <code>webpack.config.dev.js</code> file because we need to update our loaders again.</p><p id="7b2e">First let’s import the <code>extract-text-webpack-plugin</code> at the top of the file with the rest of the variables. This dependency was already bundled with the <code>create-react-app</code>, so you don’t need to worry about installing it. This <a href="https://github.com/webpack-contrib/extract-text-webpack-plugin" target="_blank">extract text plugin</a> moves all your CSS modules into a separate CSS file that is bundled at the same time as the JS bundle.</p><pre id="b8c3">const ExtractTextPlugin = require('extract-text-webpack-plugin');</pre><p id="648c">Next we will modify the CSS and SCSS loaders again.</p><figure id="ff40"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*FX3NOy_YdqIgudAvvP21PQ.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*FX3NOy_YdqIgudAvvP21PQ.png" /></div></figure><p id="6798">Finally, we will need to add the <code>extractTextPlugin</code> to the plugins array at the bottom of the file.</p><figure id="07d5"><div><img src="https://cdn-images-1.medium.com/max/2000/1*foRo59yza9IMbsiIGkUGcA.png" /></div></figure><p id="97b8">Also I had received an error “Cannot resolve module ‘style’” and I was able to resolve this error by making a <code>postcss.config.js</code> file at the root of my project directory. Check <a href="https://github.com/postcss/postcss-loader" target="_blank">here</a> for more info about that config file set-up.</p><figure id="235c"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*H9V4fWtQDCliPSQ-3HQUaQ.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*H9V4fWtQDCliPSQ-3HQUaQ.png" /></div></figure><p id="bf19">At this point everything should be wired-up correctly, so let’s test it out! If you refresh your browser now you’ll actually see that all your styles are broken. Don’t gasp, that’s actually a good thing since it means we can now import our styles.</p><p id="3190">In your <em>App</em> component let’s import our styles and <code>console.log</code> them.</p><pre id="5abc">import styles from './App.scss';<br />console.log(styles);</pre><p id="f0e5">In your console you should be able to see your style classes.</p><figure id="cad9"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*o9VrQ1idA8SqwJ_o6TL9Hg.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*o9VrQ1idA8SqwJ_o6TL9Hg.png" /></div></figure><p id="4d1f">Notice how the classes are snake case, let’s change these to camel case. Actually let’s just remove the “App” prefixes to the styles since we’re keeping our component modular and the styles will be scoped to that specific component.</p><figure id="88c0"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*WOEkLWdvAIAiHWw9oPYdew.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*WOEkLWdvAIAiHWw9oPYdew.png" /></div></figure><p id="acbc">In order to use these classes we need to change the classNames to the JS object literals, like so <code>className={styles.app}</code>.</p><figure id="3618"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*jxPOoxZ6iuLs5AdiL_RCAw.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*jxPOoxZ6iuLs5AdiL_RCAw.png" /></div></figure><p id="56e8">Ok now the moment of truth…I tweaked the styling and content a little bit, but if everything went smoothly you should have something like this:</p><figure id="fb77"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/105/1*dmYux2_SYw3ekgcrzjoJsA.gif?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*dmYux2_SYw3ekgcrzjoJsA.gif" /></div></figure><p id="7788">Woohoo, you’re now able to use Sass and CSS Modules in your project! 💃🏻 Don’t forget you’ll also have to update your <code>webpack-config-prod.js</code> file in order to build and deploy your project.</p><p id="d7df">Here is the <a href="https://github.com/swanie21/sass-css-modules-webpack" target="_blank">code</a> for more reference.</p></section>