<a href="https://medium.com/@diananina247/convert-vue-js-app-to-native-desktop-app-using-electron-76693e370b88">https://medium.com/@diananina247/convert-vue-js-app-to-native-desktop-app-using-electron-76693e370b88</a><div id="articleHeader"><h1>Convert Vue.js app to Native desktop app using Electron</h1></div><div><figure id="0059"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*uSfaXgKxKBfo0gh393GVpg.jpeg?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*uSfaXgKxKBfo0gh393GVpg.jpeg" /></div></figure><div><p id="13ea">In this post I am going to convert our <a href="http://www.qcode.in/build-complete-rss-feed-reader-app-front-end-with-vue-js-vuex-element-ui/" target="_blank">Vue.js QReader app we build earlier </a>into a native desktop app using Electron, gone are the days when if you wanted to create an app for a desktop you needed to know languages like C++, .Net or Objective C. With tools like electron you can build a fully native and cross platform for desktops using your web skills JavaScript, HTML & CSS. Let’s get started with some intro about Electron.</p><p id="9552">☞ <a href="http://academy.learnstartup.net/p/BJBa7-l-g?utm_source=1" target="_blank">Vue JS 2 — The Complete Guide (incl. Vuex)</a></p><h3 id="5414">About Electron</h3><p id="b3ef">Electron is a framework for creating native and cross-platform applications with web technologies like JavaScript, HTML, and CSS. It takes care of the hard parts and gives you API so you can focus on the core of your application. <a href="https://electron.atom.io/" target="_blank">Electron</a> is an open source library developed by GitHub Electron accomplishes this by combining <a href="https://www.chromium.org/Home" target="_blank">Chromium</a> and <a href="http://academy.learnstartup.net/p/rJHSupMbe?utm_source=1" target="_blank">Node.js</a> into a single runtime and apps can be packaged for Mac, Windows, and Linux.</p><h3 id="aeef">Get started with starter kit</h3><p id="9d20">Since we will be just wrapping our web app into an Electron web view we can start with the kit provided by Electron, let’s open the terminal and run following commands, I assume you already have <a href="http://academy.learnstartup.net/p/rJHSupMbe?utm_source=1" target="_blank"><strong>Node.js</strong></a> and <strong>NPM</strong>installed.</p><pre id="d6b9"><code># Clone the Quick Start repository<br />$ git clone https://github.com/electron/electron-quick-start</code></pre><pre id="616c"><code># Go into the repository<br />$ cd electron-quick-start</code></pre><pre id="b13e"><code># Install the dependencies and run<br />$ npm install && npm start</code></pre><h3 id="0f26">Folder Structure of Electron</h3><p id="6de5">Here is our app folder structure.</p><figure id="ad0e"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*3F9sBbjAiUpHpgH9Tw3e3g.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*3F9sBbjAiUpHpgH9Tw3e3g.png" /></div></figure><p id="f3d4">Index.html is the default page and <code>main.js</code> is main process entry point, I will explain main and renderer process later in this post.</p><h3 id="f577">Load our App in Electron Window</h3><figure id="6ee9"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*Qarz8vfFGN3Glr-ytquF1A.jpeg?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*Qarz8vfFGN3Glr-ytquF1A.jpeg" /></div></figure><p id="ffcc">Now by default electron is loading a local index.html file, if your app is local you thats fine, but in our case, we want to use our already running app, so we will load the URL. Let’s open the <code>main.js</code> and tweak the <code>createWindow()</code> function on line <strong>14</strong> to load the URL.</p><pre id="e9f2"><code>function createWindow () {<br />  // Create the browser window.<br />  mainWindow = new BrowserWindow({<br />    width: 1000,<br />    height: 600,<br />    minWidth: 480,<br />  })</code></pre><pre id="fbe0"><code>  // and load the index.html of the app.<br />  // mainWindow.loadURL(url.format({<br />  //   pathname: path.join(__dirname, 'index.html'),<br />  //   protocol: 'file:',<br />  //   slashes: true<br />  // }))</code></pre><pre id="68b7"><code>  // and load the url of the app.<br />mainWindow.loadURL('http://qreader.qcode.in')<br />...</code></pre><p id="0f5a">Now if you npm start in the terminal you should see our app loaded from url.</p><h3 id="0891">Main & Renderer Processes</h3><p id="dc63">Let’s dive into core concept of processes, so what is a process you might ask? In operating system level an instance of a computer program that is being executed is called a process. For example, if I start an Electron application and then check the Activity Monitor in macOS or Task Manager on Windows, I can see how many processes are associated with my Electron program.</p><h4 id="a854">Main process</h4><p id="e21d">The main process is responsible for creating and managing <strong>BrowserWindow</strong> instances and various application events, If you know vue.js you can think it like root component. You can register global shortcuts, create native menus and dialogs, respond to auto-update events, and more. As name suggest our main process will be main.js file in this case. Most of Electron APIs are available in the main process with all<a href="http://academy.learnstartup.net/p/rJHSupMbe?utm_source=1" target="_blank"> node.js</a> modules you installed.</p><h4 id="3370">Renderer Process</h4><p id="470e">The renderer process is responsible for running the user-interface of your app, a web page which is an instance of webContents. All DOM APIs, node.js APIs, and a some of Electron APIs are available in the renderer.</p><p id="0cdb">Here is the list of API for all processes as of Electron v1.6.7.</p><p id="c0b6">Enough with the theory, let’s complete our app.</p><h3 id="712d">Fix white splash screen on load</h3><p id="8668">The think is when the main process creates window it shows on screen but it can take a little while to completely initialize web view and fetch the URL can also take some time, that’s why it shows white splash, we can fix it by changing a color of the background to match our app or we can listen for page ready event.</p><p id="474a">Let’s modify new <strong>BrowserWindow()</strong> by passing <code>show: false</code>, which will not show the window, we will add a listener for ready then we will ask window to come on screen.</p><pre id="56e4"><code>// Create the browser window.<br />  mainWindow = new BrowserWindow({<br />    width: 1000,<br />    height: 600,<br />    minWidth: 480,<br />    show: false<br />  })</code></pre><pre id="dc8f"><code>....</code></pre><pre id="0ae9"><code>// Show when ready<br />  mainWindow.once('ready-to-show', () =&gt; {<br />     mainWindow.show()<br /> })</code></pre><p id="fddf">If your app is heavy (needs lots of data preloaded on launch) it can take some time to load the app, which will feel like slow launch, user will not see anything happening until app loads, one way you can keep the user engaged by building a splash screen which will show loading state initially.</p><h3 id="430a">App Name</h3><p id="64ca">By default when you launch the app it will display Electron in the menu bar, but we need it to be <strong>QReader</strong>, we can change it by updating your <code>packages.json</code> and adding <code>productName</code> field which will be used to name it later when we generate our app file.</p><pre id="2ba6"><code>...<br />"productName": "QReader",<br />"version": "1.0.0"</code></pre><h3 id="46f9">App Icon</h3><p id="8e7a">In order to assign a custom icon you will need a PNG 1024 x 1024px square icon, I am using this artwork. There are plenty of image converter utility out there, but I prefer <a href="https://iconverticons.com/online/" target="_blank">ICONVERTICONS</a> which does all the conversion we will need, <code>.ico</code> for windows, <code>.icns</code> for mac and <code>.png</code> will work for linux. Here is the icon I am going to use:</p><figure id="a475"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*gP6Zz8EottAHDQu_-BWk4w.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*gP6Zz8EottAHDQu_-BWk4w.png" /></div></figure><p id="4745">Once you downloaded all the converted icons paste them into below folder structure. Create assets folder in root first.</p><figure id="7d11"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*bNZNsGYPkZrJ8_kRno-vTA.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*bNZNsGYPkZrJ8_kRno-vTA.png" /></div></figure><p id="bff4">Now we have the icon, next, we will need to use it in our app. let’s pass icon in new <strong>BrowserWindow</strong>configuration.</p><pre id="5d27"><code>mainWindow = new BrowserWindow({<br />    width: 1000,<br />    height: 600,<br />    minWidth: 480,<br />    show: false,<br />    icon: path.join(__dirname, 'assets/icons/png/64x64.png')<br />  })</code></pre><h3 id="e211">Open target=_blanks links in New window</h3><p id="ee54">If you open a feed link, it should open in the browser window, but in our current app as you can see it is opening in a new window which is not we want.</p><figure id="a215"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*oiWKeoG9moTES7r7zRVfEg.png?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*oiWKeoG9moTES7r7zRVfEg.png" /></div></figure><p id="86d4">We can fix it by running listening for <code>new-window</code> event on the <a href="https://electron.atom.io/docs/api/web-contents/" target="_blank">webContents</a>. Add this in main.js.</p><pre id="a93c"><code>...<br />// and load the url of the app.  <br />mainWindow.loadURL('http://qreader.qcode.in')</code></pre><pre id="c66d"><code>// Open all target="_blank" link in external browser<br />let webContents = mainWindow.webContents;<br />    webContents.on('new-window', function(event, url){<br />      event.preventDefault();<br />      electron.shell.openExternal(url);<br />});<br />...</code></pre><p id="48bf">That fixes this issue, now we need a launcher for app, lets build the .app file for mac, you can also build for window and linux.</p><h3 id="e03c">Generate Electron Package</h3><p id="7ede">Lets pull the <code>electron-packager</code> as dev dependency from npm.</p><pre id="5f29"><code># for use in npm scripts<br />npm install electron-packager --save-dev</code></pre><pre id="4f92"><code># for use from cli<br />npm install electron-packager -g</code></pre><p id="2d4c">Now we have it, lets generate package for mac.</p><h4 id="a02e">Mac Build</h4><pre id="47c3"><code>electron-packager . --overwrite --platform=darwin --arch=x64 --icon=assets/icons/mac/icon.icns --prune=true --out=release-builds</code></pre><p id="0eb9">It will generate the .app file into <code>release-builds/QReader-darwin-x64</code> folder.</p><h4 id="68dd">Linux Build</h4><pre id="3024"><code>electron-packager . --overwrite --platform=linux --arch=x64 --icon=assets/icons/png/1024x1024.png --prune=true --out=release-builds</code></pre><h4 id="1f91">Windows Build</h4><pre id="5454"><code>electron-packager . --overwrite --asar=true --platform=win32 --arch=ia32 --icon=assets/icons/win/icon.ico --prune=true --out=release-builds --version-string.CompanyName=CE --version-string.FileDescription=CE --version-string.ProductName=\"Electron Tutorial App\"</code></pre><p id="8157">Here are options details for packager</p><p id="9f0d"><strong>overwrite</strong>: replaces any existing output directory when packaging.</p><p id="ac60"><strong>platform</strong>: The target platform to build for</p><p id="cfa7"><strong>arch</strong>: the architecture to build for</p><p id="a56f"><strong>icon</strong>: sets the icon for the app</p><p id="47c0"><strong>prune</strong>: runs npm prune –production before packaging the app. It removes unnecesary packages.</p><p id="7238"><strong>out</strong>: the name of the directory where the packages are created.</p><p id="08db">Now you can run the app by just clicking on app icon. and you can see you the name of app is also changed from <strong>Electron</strong> to <strong>QReader.</strong></p><figure id="de49"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/90/1*Z-WbGMXcsR8U5G4KY9gRQQ.jpeg?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*Z-WbGMXcsR8U5G4KY9gRQQ.jpeg" /></div></figure><h3 id="5e91">Conclusion</h3><p id="cf31">I have covered only the basics in this post, I will suggest you must install the <a href="https://github.com/electron/electron-api-demos/releases" target="_blank">API Demos</a> app from Electron if you really wanted to learn more. with electron its very easy to build native desktop app, if you know the html, css, and javascript you are all set. Let me know what you have created with Electron, if you have any question let me know in comments.</p><p id="80a5"><strong>Suggest</strong></p><p id="84ca">☞ <a href="http://academy.learnstartup.net/p/Byx0wbgWl?utm_source=1" target="_blank">Learn by Doing: Vue JS 2.0 the Right Way</a></p><p id="acec">☞ <a href="http://academy.learnstartup.net/p/rkNdpSzVe?utm_source=1" target="_blank">Vue.js 2 Essentials: Build Your First Vue App</a></p><p id="4303">☞ <a href="http://academy.learnstartup.net/p/ByG5uYzlcl?utm_source=1" target="_blank">Horizontal Feed Component with Sass and VueJs 2</a></p><p id="02b5">☞ <a href="http://academy.learnstartup.net/p/SkVWa3TWg?utm_source=1" target="_blank">Vue JS 2 — The Complete Guide (incl. Vuex)</a></p><p id="f024">☞ <a href="http://academy.learnstartup.net/p/SkNuVW6fe?utm_source=1" target="_blank">Build A Web App with VueJS, Spring Framework and MongoDB</a></p>