<a href="https://medium.com/@thejasonfile/fetch-vs-axios-js-for-making-http-requests-2b261cdd3af5">https://medium.com/@thejasonfile/fetch-vs-axios-js-for-making-http-requests-2b261cdd3af5</a><div id="articleHeader"><h1>Fetch vs. Axios.js for making http requests</h1></div><figure id="4e3d"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/75/1*3V84MyeQSlPtb7Bs_SU5Sg.jpeg?q=20" /><div class="readableLargeImageContainer"><img src="https://cdn-images-1.medium.com/max/2000/1*3V84MyeQSlPtb7Bs_SU5Sg.jpeg" /></div><figcaption>That is a handsome face!</figcaption></figure><p id="3e6f">One of the final sections of Stephen Grider’s excellent ‘<a href="https://www.udemy.com/javascript-es6-tutorial/learn/v4/overview" target="_blank">ES6 Javascript: The Complete Developer’s Guide</a>’ course on Udemy.com discusses the .fetch() method and some if its shortcomings. He points out that there are some things with .fetch() that aren’t ideal and suggests that there are other options out there for making HTTP requests. One of those options is <a href="https://www.npmjs.com/package/axios" target="_blank">axios.js</a>. I had not heard of Axios before so this seemed like a great opportunity to do a little digging and see what I could come up with. (Since this is referencing material from Stephen’s course, I am using examples and conventions similar to his.)</p><p id="fbfa">Axios is a Javascript library used to make http requests from node.js or XMLHttpRequests from the browser and it supports the Promise API that is native to JS ES6. Another feature that it has over .fetch() is that it performs automatic transforms of JSON data.</p><p id="d409">If you use .fetch() there is a two-step process when handing JSON data. The first is to make the actual request and then the second is to call the .json() method on the response.</p><p id="c702"><em>Update 06/27/17: As of May 29th, </em><a href="https://developer.spotify.com/news-stories/2017/01/27/removing-unauthenticated-calls-to-the-web-api/" target="_blank"><em>Spotify now requires authentication for all requests to their API</em></a><em>, so the below examples will not work as written.</em></p><p id="4c35">Here is a simple example using the Spotify API. I set the url as a variable and then pass it to fetch and set the .then() callback to console the data that gets returned from the request.</p><pre id="dcb9">const url = '<a href="https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCF%27" target="_blank">https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCF'</a></pre><pre id="dfc5">fetch(url).then(data=&gt;console.log(data));</pre><figure id="b830"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/75/1*MBFkZoDs-MQb6ztpjmM_ig.png?q=20" /><div class="readableLargeImageContainer"><img /></div><figcaption>The default response from the .fetch() method.</figcaption></figure><p id="0eb7">That’s great, but this is not the data you are looking for. That is the response from the server letting you know that your request went through just fine. Great, but you can’t do much with that.</p><p id="849c">To get to that data, you have to pass it to .json() first and then you can see it.</p><pre id="2a3e">fetch(url).then(response =&gt; response.json()).then(data =&gt; console.log(data));</pre><figure id="d675"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/75/1*9ubEzV7mNNDPs2ZLh1k3pQ.png?q=20" /><div class="readableLargeImageContainer"><img /></div><figcaption>The result after passing the response to the .json() method.</figcaption></figure><p id="acdb">Now, this is the data from Spotify that we wanted.</p><p id="7580">Let’s see how this is handled with Axios.</p><p id="cb66">The first step in using Axios is installing Axios. You can use npm if you want to run axios in node or a cdn if you want to run it in your browser.</p><pre id="64d6">npm install axios</pre><pre id="fa82"><a href="https://cdnjs.cloudflare.com/ajax/libs/axios/0.15.3/axios.min.js" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/axios/0.15.3/axios.min.js</a></pre><p id="34a4">Then, in my console, I assign the <code>url</code> variable and then pass it to the <code>axios.get()</code> method.</p><pre id="e66d">const url = '<a href="https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCF%27" target="_blank">https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCF'</a></pre><pre id="778f">axios.get(url).then(response =&gt; console.log(response));</pre><figure id="1c63"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/75/1*r76qb_RUT18pcUmd-SLGBA.png?q=20" /><div class="readableLargeImageContainer"><img /></div></figure><p id="fa11">So by using axios you can cut out the middle step of passing the results of the http request to the .json() method. Axios just returns the data object you would expect.</p><p id="fc70">The second issue that Stephen brings up is how .fetch() handles error responses. Logically you would think that if .fetch() gets an error it would enter the .catch() block and return anything there, right? Not necessarily. Here is an example.</p><p id="5e8d">I have altered my <code>url</code> variable from the previous examples so that it is now incorrect. I would expect a 400 error at this point and for my .fetch() to go into the .catch() block but this is what happens instead.</p><pre id="e2b5">const url = '<a href="https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCFcdsds%27" target="_blank">https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCFcdsds'</a>;</pre><pre id="43dc">fetch(url).catch(error =&gt; console.log('BAD', error)).then(response =&gt; console.log('GOOD', response));</pre><p id="6cf9">I’ve added the ‘BAD’ and ‘GOOD’ strings in the responses to clarify what is happening here.</p><figure id="650e"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/75/1*5ZmMcEBqOE1v_evfWYmc7w.png?q=20" /><div class="readableLargeImageContainer"><img /></div></figure><p id="1036">I get the 400 response code but, as you can see by the ‘GOOD’ string in the console, the .then() block was executed. How does Axios handle this? The way you would probably expect. You get any kind of error with the http request and the .catch() block is executed.</p><figure id="4c09"><div><div><img src="https://cdn-images-1.medium.com/freeze/max/75/1*MP3q_dzXbSEsRDri40-UpQ.png?q=20" /><div class="readableLargeImageContainer"><img /></div></figure><p id="821b">The ‘BAD’ string is there and the error is logged to the console.</p><p id="e614">The .fetch() method is a great step in the right direction of getting http requests native in ES6, but just know that if you use it there are a couple of gotchas that might be better handled by third-party libraries like Axios.</p>